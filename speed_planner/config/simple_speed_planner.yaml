simple_speed_planner:
  ros__parameters:
    # Topic 설정
    path_topic: "/local_planned_path"
    speed_topic: "/current_speed"
    out_topic: "/desired_speed_profile"

    # 새로 추가된 출력 토픽
    desired_speed_topic: "/cmd/speed"   # m/s
    desired_rpm_topic: "/cmd/rpm"       # motor rpm

    # 퍼블리시 주기
    recalc_rate_hz: 15.0         # 속도 프로파일 재계산 타이머(Hz)
    desired_pub_rate_hz: 50.0     # /cmd/speed, /cmd/rpm 퍼블리시(Hz)

    # 호라이즌
    horizon_m: -1.0               # 전체 경로 사용(-1). >0이면 해당 거리까지만 사용

    # 속도/가속 제약
    v_max: 4.0
    v_min: 0.3
    v_end: 0.0                    # 마지막 웨이포인트 목표 속도(정지면 0.0)

    a_acc: 2.0                    # 최대 가속 (m/s^2)
    a_brk: 2.5                    # 최대 감속 (m/s^2)
    ay_max: 1.5                   # 최대 횡가속 (m/s^2) → 곡률 기반 속도 제한

    # 곡률/스무딩 파라미터
    kappa_ma_window: 5            # 곡률 이동평균 윈도우(포인트)
    epsilon_kappa: 1.0e-6

    # 현재속도 EMA 필터(100Hz 입력 저역통과)
    ema_tau_speed: 0.2            # 초 단위 time constant

    # 명령 프리뷰/스무딩(기본값 유지 가능)
    preview_t: 0.4
    preview_s_min: 0.5
    preview_s_max: 5.0
    cmd_acc_limit: 1.5
    ema_tau_cmd: 0.2

    # RPM 변환용 차량 파라미터
    wheel_diameter_m: 0.47        # 47 cm
    gear_ratio: 4.6               # 모터:바퀴 기어비 (RPM_wheel = RPM_motor / 4.6)

    # 로깅
    log_throttle_sec: 2.0